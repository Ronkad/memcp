byobu ctrl+f2 split, f7 scroll back

MMap
----
import "https://github.com/edsrzf/mmap-go/blob/main/mmap.go"
mmap.Map(file, RDWR, 0) // oder RDONLY
// available functions: Flush, Unmap
// ist dann ein byte[]
--> type MMapReader interface { Reader MMap(int size) []byte }

TODO
----
 - processes implementation with https://pkg.go.dev/context (killable, timeoutable)
 - RDF insert
 - RDF query
 - HTTP requests -> fetch @prefix
 - IPFS client -> fetch @prefix (https://pkg.go.dev/github.com/ipfs/kubo/client/rpc#HttpApi.ResolveNode)
 - primary key auto_increment
 - tempcol -> LRU, garbage collector, lazy reevaluation, change hooks
 - LEFT JOIN
 - FOREIGN KEY
 - group tables -> create foreign key association
 - empty tables with a foreign key -> shard after their foreign key
 - turn all subqueries into LEFT JOINs
 - prejoins for complex query plans (group on inter-table conditions)
 - iterateIndex -> sort delta storage and merge it with main, so we can guarantee the correct order in iterateIndex
 - scan_star (schema maintbl filter map reduce neutral subtbl[tblalias->tblname] sub-filter sub-map sub-reduce sub-neutral filter-list map-list) -> every sub-alias will become a map column; no need for a lib function; just optimize some pivot caching
 - docker hub upload
 - mysql importer
 - plugin concept e.g. for AIs (they will declare new scheme functions) -> .so
 - transactions: every delete+insert has a optional txid (or 0 if committed); rebuild only rebuilds up to the last committed insert-item; scans are relative to a txid where items with a non-matching txid are ignored
 - system.grant, system.user.all -> allow access for some databases
 - tables stored in a table? (StorageSCMER)
 - mmap'd hdd storage manager


GO JIT Engine
-------------
 - store a copy of the program's bytecode somewhere in .data
 - ship a version of the compiler in the executable
 - specialize code on the bytecode level (feed parameter values and type information of interfaces into functions)
 - regenerate the code
 - get out a new func() object

max integer storable in doubles: 9007199254740992 (9 Peta)

typical phpmyadmin queries
--------------------------
SELECT @@version, @@version_comment
SET NAMES 'utf8mb4' COLLATE 'utf8mb4_general_ci'
SELECT CURRENT_USER()
SELECT `SCHEMA_NAME` FROM `INFORMATION_SCHEMA`.`SCHEMATA`, (SELECT DB_first_level FROM ( SELECT DISTINCT SUBSTRING_INDEX(SCHEMA_NAME, '_', 1) DB_first_level FROM INFORMATION_SCHEMA.SCHEMATA WHERE TRUE ) t ORDER BY DB_first_level ASC LIMIT 0, 100) t2 WHERE TRUE AND 1 = LOCATE(CONCAT(DB_first_level, '_'), CONCAT(SCHEMA_NAME, '_')) ORDER BY SCHEMA_NAME ASC
SELECT COUNT(*) FROM ( SELECT DISTINCT SUBSTRING_INDEX(SCHEMA_NAME, '_', 1) DB_first_level FROM INFORMATION_SCHEMA.SCHEMATA WHERE TRUE ) t
SELECT COUNT(*) FROM ( SELECT DISTINCT SUBSTRING_INDEX(SCHEMA_NAME, '_', 1) DB_first_level FROM INFORMATION_SCHEMA.SCHEMATA WHERE TRUE ) t
SELECT 1 FROM mysql.user LIMIT 1
SELECT 1 FROM (SELECT `GRANTEE`, `IS_GRANTABLE` FROM `INFORMATION_SCHEMA`.`COLUMN_PRIVILEGES` UNION SELECT `GRANTEE`, `IS_GRANTABLE` FROM `INFORMATION_SCHEMA`.`TABLE_PRIVILEGES` UNION SELECT `GRANTEE`, `IS_GRANTABLE` FROM `INFORMATION_SCHEMA`.`SCHEMA_PRIVILEGES` UNION SELECT `GRANTEE`, `IS_GRANTABLE` FROM `INFORMATION_SCHEMA`.`USER_PRIVILEGES`) t WHERE `IS_GRANTABLE` = 'YES' AND '''''@''''' LIKE `GRANTEE` LIMIT 1
SELECT 1 FROM `INFORMATION_SCHEMA`.`USER_PRIVILEGES` WHERE `PRIVILEGE_TYPE` = 'CREATE USER' AND '''''@''''' LIKE `GRANTEE` LIMIT 1

SELECT COUNT(*) as count FROM system.`user`
SELECT table_rows as count FROM information_schema.TABLES WHERE TABLE_SCHEMA='foo' AND TABLE_NAME='bar'
SELECT table_name as table_name,column_name as column_name,column_type as column_type FROM information_schema.columns WHERE table_schema='foo' AND table_name='bar' AND data_type='enum'
SHOW CREATE TABLE foo.bar
SELECT column_name as column_name FROM information_schema.statistics WHERE table_schema = 'foo' AND table_name = 'bar' AND index_name = 'PRIMARY' ORDER BY seq_in_index ASC

SELECT
data_length AS data_size,
index_length AS index_size,
(data_length + index_length) AS total_size,
table_comment AS comment
FROM
information_schema.TABLES
WHERE
table_schema = "foo"
AND table_name = "bar"


MariaDB [fuse]> show table status from fuse like 'tree';
+------+--------+---------+------------+------+----------------+-------------+-----------------+--------------+-----------+----------------+---------------------+---------------------+------------+--------------------+----------+----------------+---------+--------------------+-----------+
| Name | Engine | Version | Row_format | Rows | Avg_row_length | Data_length | Max_data_length | Index_length | Data_free | Auto_increment | Create_time         | Update_time         | Check_time | Collation          | Checksum | Create_options | Comment | Max_index_length   | Temporary |
+------+--------+---------+------------+------+----------------+-------------+-----------------+--------------+-----------+----------------+---------------------+---------------------+------------+--------------------+----------+----------------+---------+--------------------+-----------+
| tree | MyISAM |      10 | Dynamic    |    4 |             28 |         112 | 281474976710655 |        10240 |         0 |              8 | 2024-03-04 10:11:48 | 2024-03-04 17:30:59 | NULL       | utf8mb3_general_ci |     NULL |                |         | 288230376151710720 | N         |
+------+--------+---------+------------+------+----------------+-------------+-----------------+--------------+-----------+----------------+---------------------+---------------------+------------+--------------------+----------+----------------+---------+--------------------+-----------+

MariaDB [fuse]> show engines;
+--------------------+---------+-------------------------------------------------------------------------------------------------+--------------+------+------------+
| Engine             | Support | Comment                                                                                         | Transactions | XA   | Savepoints |
+--------------------+---------+-------------------------------------------------------------------------------------------------+--------------+------+------------+
| CSV                | YES     | Stores tables as CSV files                                                                      | NO           | NO   | NO         |
| MRG_MyISAM         | YES     | Collection of identical MyISAM tables                                                           | NO           | NO   | NO         |
| MEMORY             | YES     | Hash based, stored in memory, useful for temporary tables                                       | NO           | NO   | NO         |
| Aria               | YES     | Crash-safe tables with MyISAM heritage. Used for internal temporary tables and privilege tables | NO           | NO   | NO         |
| MyISAM             | YES     | Non-transactional engine with good performance and small data footprint                         | NO           | NO   | NO         |
| SEQUENCE           | YES     | Generated tables filled with sequential values                                                  | YES          | NO   | YES        |
| InnoDB             | DEFAULT | Supports transactions, row-level locking, foreign keys and encryption for tables                | YES          | YES  | YES        |
| PERFORMANCE_SCHEMA | YES     | Performance Schema                                                                              | NO           | NO   | NO         |
+--------------------+---------+-------------------------------------------------------------------------------------------------+--------------+------+------------+
8 rows in set (0,000 sec)

MariaDB [fuse]> 


SELECT kc.CONSTRAINT_NAME,kc.TABLE_NAME,kc.COLUMN_NAME,kc.ORDINAL_POSITION
FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE kc WHERE kc.TABLE_SCHEMA='bayes' AND kc.REFERENCED_TABLE_NAME IS NULL
